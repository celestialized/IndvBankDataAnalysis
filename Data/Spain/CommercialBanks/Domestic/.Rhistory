leg.raw$violence[is.na(leg.raw$violence)] <- 0
## Label MajCat factor categories
leg.raw$MajCat <- factor(leg.raw$MajCat, labels = c("Minority", "Regular Maj.", "Strong Maj."))
## Transform GDP/capita to thousands of USD
leg.raw$GDPperCapita <- leg.raw$GDPperCapita/1000
## Create disproportionality threshold variable where 1 < 6
leg.raw$HighProp[leg.raw$disproportionality < 6] <- 1
leg.raw$HighProp[leg.raw$disproportionality >= 6] <- 0
## Create disproportionality threshold variable where 1 < 3
leg.raw$VeryHighProp[leg.raw$disproportionality < 4] <- 1
leg.raw$VeryHighProp[leg.raw$disproportionality >= 4] <- 0
## Transform majority variable from a proportion to a percentage
leg.raw$maj = leg.raw$maj*100
## Change the system variable's reference category to Parliamentary
leg.raw$system <- relevel(leg.raw$system, ref = "Parliamentary")
## Only Countries with Legislatures
## leg <- subset(leg.raw, legislature == 1)
## Only Countries with Elected Legislatures
#dem <- subset(leg.raw, elect_legislature == 1)
dem <- subset(leg.raw, liec > 5)
## Only before 2010
dem <- subset(dem, year < 2010)
## Only Countries with Elected Legislatures after 1989 (new sample 199)
dNew <- subset(dem, year > 1989)
library(Zelig)
dNComp <- dNew[complete.cases(dNew["WomenInParl"]),]
dNComp$logWomen <- log(dNComp$WomenInParl + 0.1)
dNComp$logDis <- log(dNComp$disproportionality + 0.1)
D1 <- zelig(violence ~ WomenInParl + HighProp + maj + DemAge, model = "relogit", data = dem, tau = 71/3376, robust = list(method = "weave"), cite = FALSE)
summary(D1)
library(ggplot2)
ggplot(dem, aes(disproportionality, WomenInParl, colour = violence)) + geom_point() + theme_bw()
ggplot(dem, aes(disproportionality, WomenInParl, colour = factor(violence))) + geom_point() + theme_bw()
ggplot(dem, aes(disproportionality, WomenInParl, colour = factor(violence))) +
geom_point() +
scale_colour_manual("gray", "red") +
theme_bw()
scale_colour_manual(c("gray", "red")) +
)))
ggplot(dem, aes(disproportionality, WomenInParl, colour = factor(violence))) +
geom_point() +
scale_colour_manual(c("gray", "red")) +
theme_bw()
ggplot(dem, aes(disproportionality, WomenInParl, colour = factor(violence))) +
geom_point() +
scale_colour_manual(values = c("gray", "red")) +
theme_bw()
ggplot(dem, aes(disproportionality, WomenInParl, colour = factor(violence))) +
geom_point(alpah = 0.5) +
scale_colour_manual(values = c("gray", "red")) +
theme_bw()
D1 <- zelig(violence ~ WomenInParl + HighProp + maj + DemAge, model = "relogit", data = dNew, tau = 71/3376, robust = list(method = "weave"), cite = FALSE)
summary(D1)
D1 <- zelig(violence ~ WomenInParl + HighProp + maj + DemAge + MurderRate, model = "relogit", data = dNew, tau = 71/3376, robust = list(method = "weave"), cite = FALSE)
D1 <- zelig(violence ~ WomenInParl + HighProp + maj + DemAge + UNMurderRate, model = "relogit", data = dNew, tau = 71/3376, robust = list(method = "weave"), cite = FALSE)
summary(D1)
ggplot(dem, aes(disproportionality, WomenInParl, colour = factor(violence))) +
geom_point(alpah = 0.5) +
facet_grid(.~violence) +
scale_colour_manual(values = c("gray", "red")) +
theme_bw()
library(ggplot2)
?hline
ggplot(dem, aes(disproportionality, WomenInParl, colour = factor(violence))) +
geom_point(alpah = 0.5) +
geom_vline(aes(xintercept = 6)) +
facet_grid(.~violence) +
scale_colour_manual(values = c("gray", "red")) +
theme_bw()
ggplot(dem, aes(log(disproportionality), WomenInParl, colour = factor(violence))) +
geom_point(alpah = 0.5) +
geom_vline(aes(xintercept = 6)) +
facet_grid(.~violence) +
scale_colour_manual(values = c("gray", "red")) +
theme_bw()
ggplot(dem, aes(log(disproportionality), WomenInParl, colour = factor(violence))) +
geom_point(alpah = 0.5) +
facet_grid(.~violence) +
scale_colour_manual(values = c("gray", "red")) +
theme_bw()
AnalysisURL <- "https://raw.github.com/christophergandrud/GreenBook/master/Analysis/MainAnalysis2.R"
library(survival)
?pspline
library(simPH)
?simGG
?ggfitStrata
library(simPH)
?coxsimInteract
exp(-1)
exp(-10)
exp(1)
exp(-1.457)
?png
library(simPH)
?simGG
library(DataCombine)
devtools::source_url("http://bit.ly/NXdCpk")
View(cpi.data)
cpi.data$time_to_election_midterm <- cpi.data$time_to_election
cpi.data$time_to_election_midterm <- if(cpi.data$time_to_election_midterm > 7) cpi.data$time_to_election_midterm - 8
for (i in 1:nrow(cpi.data)){
if (cpi.data[i, "time_to_election_midterm"] > 7){
cpi.data[i, time_to_election_midterm]<- cpi.data[i, time_to_election_midterm] - 8
else{
cpi.data[i, time_to_election_midterm]<- cpi.data[i, time_to_election_midterm]
}
]
for (i in 1:nrow(cpi.data)){
if (cpi.data[i, "time_to_election_midterm"] > 7){
cpi.data[i, time_to_election_midterm]<- cpi.data[i, time_to_election_midterm] - 8
else{
for (i in 1:nrow(cpi.data)){
if (cpi.data[i, "time_to_election_midterm"] > 7){
cpi.data[i, time_to_election_midterm]<- cpi.data[i, time_to_election_midterm] - 8
}else{
cpi.data[i, time_to_election_midterm]<- cpi.data[i, time_to_election_midterm]
}
]
for (i in 1:nrow(cpi.data)){
if (cpi.data[i, "time_to_election_midterm"] > 7){
cpi.data[i, time_to_election_midterm]<- cpi.data[i, time_to_election_midterm] - 8
}else{
cpi.data[i, time_to_election_midterm]<- cpi.data[i, time_to_election_midterm]
}
}
devtools::source_url("http://bit.ly/NXdCpk")
for (i in 1:nrow(cpi.data)){
if (cpi.data[i, "time_to_election_midterm"] > 7){
cpi.data[i, "time_to_election_midterm"]<- cpi.data[i, "time_to_election_midterm"] - 8
}else{
cpi.data[i, "time_to_election_midterm"]<- cpi.data[i, "time_to_election_midterm"]
}
}
View(cpi.data)
cpi.data$time_to_election_midterm <- cpi.data$time_to_election
for (i in 1:nrow(cpi.data)){
if (cpi.data[i, "time_to_election_midterm"] > 7){
cpi.data[i, "time_to_election_midterm"]<- cpi.data[i, "time_to_election_midterm"] - 8
}else{
cpi.data[i, "time_to_election_midterm"]<- cpi.data[i, "time_to_election_midterm"]
}
}
View(cpi.data)
cpi.data2SMidterm <- subset(cpi.data, !(time_to_election %in% c(6, 7)))
View(cpi.data2SMidterm)
devtools::source_url("http://bit.ly/NXdCpk")
library(Zelig)
library(digest)
library(DataCombine)
cpi.data$time_to_election_midterm <- cpi.data$time_to_election
for (i in 1:nrow(cpi.data)){
if (cpi.data[i, "time_to_election_midterm"] > 7){
cpi.data[i, "time_to_election_midterm"]<- cpi.data[i, "time_to_election_midterm"] - 8
}else{
cpi.data[i, "time_to_election_midterm"]<- cpi.data[i, "time_to_election_midterm"]
}
}
# Subset for mid-term and presidential elections
cpi.data2SMidterm <- subset(cpi.data, !(time_to_election_midterm %in% c(6, 7)))
View(cpi.data2SMidterm)
S1 <- zelig(error.prop.deflator.q2 ~ recession + ExpenditureGDP + PotentialGDP + DiscountRate2qChange + UNRATE + pres_party + time_to_election_midterm + GlobalModel + senate_dem_rep + house_dem_rep, model = "normal", data = cpi.data2SMidterm, cite = FALSE)
summary(S1)
SM2 <- zelig(error.prop.deflator.q2 ~ recession + ExpenditureGDP + PotentialGDP + DiscountRate2qChange + UNRATE + pres_party*time_to_election_midterm + GlobalModel + senate_dem_rep + house_dem_rep, model = "normal", data = cpi.data2SMidterm, cite = FALSE)
summary(SM2)
library(XML)
?fromXML
?XML
?xml
library(XML)
??xml
###########
# Combine Spanish Commercial Bank Data
# Christopher Gandrud
# 12 November 2013
##########
# Load packages
library(reshape2)
library(stringr)
setwd("~/Dropbox/AMCProject/FailuresAndFederalism/IndvBankDataAnalysis/Data/Spain/CommercialBanks/Domestic/")
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
TempCast <- dcast(TempMolten, ... ~ variable)
}
View(TempCast)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempCast <- dcast(TempMolten, ... ~ bank)
}
View(TempCast)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempCast <- dcast(TempMolten, ... ~ bank)
}
View(TempCast)
library(DataCombine)
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(Temp, "bank")
TempCast <- dcast(TempMolten, ... ~ bank)
}
View(TempMolten)
View(TempMolten)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempCast <- dcast(TempMolten, ... ~ bank)
}
View(TempCast)
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- numeric(TempMolten$value)
}
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, ... ~ bank)
}
dim(Temp)
View(TempMolten)
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
Temp$Var <- gsub(",", "", Temp$Var)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, ... ~ bank)
}
View(TempMolten)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$Var <- gsub(",", "", TempMolten$Var)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, ... ~ bank)
}
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, ... ~ bank)
}
View(TempMolten)
View(TempCast)
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, bank ~ variable + value)
}
View(TempCast)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, bank ~ variable)
}
View(TempCast)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, bank ~ variable ~ value)
}
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, bank ~ variable + value)
}
View(Temp)
View(TempCast)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, bank ~ variable)
}
View(TempCast)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- acast(TempMolten, bank ~ variable)
# add month year variable
}
View(TempCast)
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- acast(TempMolten, bank ~ variable, margins = TRUE)
# add month year variable
}
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- acast(TempMolten, bank ~ variable, fill = value)
# add month year variable
}
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- acast(TempMolten, bank ~ variable, value.var = value)
# add month year variable
}
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- acast(TempMolten, bank ~ variable, value.var = "value")
# add month year variable
}
guess_value(TempMolten)
reshape2::guess_value(TempMolten)
reshape2::guess_value(TempMolten)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- acast(TempMolten, bank ~ variable, value.var = "value", fun.aggregate=sum)
# add month year variable
}
View(TempCast)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, bank ~ variable, value.var = "value", fun.aggregate=sum)
# add month year variable
}
View(TempCast)
i <- gsub("\\.csv", "", i)
i <- gsub("2", "-2", i)
Files <- list.files()
for (i in Files){
Temp <- read.csv(i)
Temp <- Temp[-1, ]
Temp$Var <- gsub("[0-9]", "", Temp$Var)
Temp$Var <- gsub("\\.", "", Temp$Var)
Temp$Var <- str_trim(Temp$Var)
TempMolten <- melt(Temp, id.vars = 'Var')
names(TempMolten) <- c("variable", "bank", "value")
TempMolten <- MoveFront(TempMolten, "bank")
TempMolten$value <- gsub(",", "", TempMolten$value)
TempMolten$value <- as.numeric(TempMolten$value)
TempCast <- dcast(TempMolten, bank ~ variable, value.var = "value", fun.aggregate=sum)
# Create month variable
i <- gsub("\\.csv", "", i)
i <- gsub("2", "-2", i)
TempCast$date <- i
TempCast <- MoveFront(TempCast, "date")
}
View(TempCast)
